<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://kit.fontawesome.com/7d64038428.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="icon" href="pics/logo-bt.png">
  <link rel="stylesheet" href="menuheaderDB.css">
  <link rel="stylesheet" href="logo.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Dashboard</title>
<style>
* {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background-color: #F2F7FC;
    position: relative;
}

/* Sidebar */
.side-menu {
    width: 260px;
    height: 100vh;
    background-color: #fff;
    color: #031F4E;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1000;
    overflow-y: auto;
    transition: width 0.3s;
    padding: 2px;
}

.side-menu .logo {
    text-align: center;
    padding: 20px;
}

.side-menu .logo img {
    max-width: 100%;
    height: auto;
}

.side-menu a {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    color: #031F4E;
    text-decoration: none;
    transition: background 0.3s, color 0.3s;
}

.side-menu a i {
    margin-right: 10px;
}

.side-menu a.active {
    background-color: #031F4E;
    color: #fff;
}

.side-menu a.active i {
    color: #fff;
}

.side-menu a:hover:not(.active) {
    background-color: #2A416F;
    color: #fff;
}


.logout {
            color: #e74c3c; /* Log Out link color */
            padding: 15px 20px; /* Padding for Log Out link */
            margin-top: 215px; /* Add space above Log Out link */
            display: flex; /* Ensure the icon and text align properly */
            align-items: center; /* Center align the icon and text vertically */
            transition: background 0.3s, color 0.3s; /* Transition effects */
        }

        .logout:hover {
            background-color: #c0392b; /* Hover effect for Log Out link */
            color: #fff; /* Change text color on hover */
        }
        /* Set a fixed height for the dropdown and enable internal scrolling */
.dropdown-content {
    display: none;
    background-color: #fefcfc;
    position: relative;
    max-height: 150px; /* Set a fixed height for the dropdown */
    overflow-y: auto; /* Enable internal scrolling if content exceeds the height */
    padding-left: 20px; /* Keep padding to make it look nice */
    padding-right: 20px;
    border-left: 3px solid #031F4E;
}


.main {
    position: absolute;
    top: 0;
    left: 260px;
    width: calc(100% - 260px);
    background: #F2F7FC;
    min-height: 100vh;
    display: flex;  /* Flexbox layout */
    justify-content: center;  /* Horizontal centering */
    align-items: center;  /* Vertical centering */
}

.cards {
    width: auto; /* Adjust width to auto for better centering */
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-gap: 20px;
  
    margin-left:-37%;
    margin-top:-45%;

}


.cards .card {
    width: 140%;
    padding: 30px;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 7px 25px 0 rgba(0, 0, 0, 0.08);
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background-color 0.3s ease;
}

.cards .card:hover {
    background-color: #031F4E;
}

.cards .card:hover .number, 
.cards .card:hover .card-name, 
.cards .card:hover .icon-box {
    color: #fff;
}

.number {
    font-size: 35px;
    font-weight: 500;
    color: #031F4E;
}

.card-name {
    color: #888;
    font-weight: 600;
}

.icon-box {
    
    font-size: 45px;
    color: #031F4E;
}

/* Dropdown Menu */
.dropdown-content {
    display: none;
    background-color: #fefcfc;
    position: relative;
}

.dropdown-content a {
    padding-left: 30px;
}

.dropdown:hover .dropdown-content {
    display: block;
}

/* Responsive styles */
@media (max-width: 1115px) {
    .side-menu {
        width: 60px;
    }
    .main {
        left: 60px;
        width: calc(100% - 60px);
        
    }
    .cards {
        grid-template-columns: repeat(2, 1fr); /* Adjust grid layout on smaller screens */
        
    }
}

@media (max-width: 768px) {
    .cards {
        grid-template-columns: 1fr; /* Single column layout for smaller screens */
    }
}

</style>
</head>
<body>

<div class="header-panel">
  
</div>

<div class="overlay" onclick="toggleDropdown()"></div>

<div id="sideMenu" class="side-menu">
    <div class="logo">
      <img src="pics/logo.png" alt="Logo">
    </div>
    <a href="dashboard.html" class="active"><i class="fas fa-chart-line"></i> Dashboard</a>
    <a href="product.php"><i class="fas fa-box"></i> Product</a>
    
    <!-- Dropdown for Vendors -->
    <div class="dropdown">
      <a href="vendorlist.php" id="vendorDropdown" class="dropdown-toggle"><i class="fas fa-users"></i> Vendors</a>
      <div id="vendorDropdownContent" class="dropdown-content" style="display: none;">
        <a href="vendorlist.php" id="vendorListLink" class="active"><i class="fas fa-list"></i> Vendor List</a>
        <a href="transaction.php"><i class="fas fa-dollar-sign"></i> Transactions</a>
      </div>
    </div>

    <a href="collector.php"><i class="fa fa-user-circle"></i> Collector</a>
    <a href="collection.php"><i class="fa fa-table"></i> Collection</a>
    <a href="archive.php"><i class="fas fa-archive"></i> Archive</a>
    
    <!-- Log Out Link -->
    <a href="index.html" class="logout"><i class="fas fa-sign-out-alt"></i> Log Out</a>
</div>


<div class="main">
    <div class="main">
        <div class="cards">
            <div class="card">
                <div class="card-content">
                    <div class="number" id="registered-vendors">0</div>
                    <div class="card-name">Registered Vendors</div>
                </div>
                <div class="icon-box">
                    <i class="fa-solid fa-registered"></i>
                </div>
            </div>
            <div class="card">
                <div class="card-content">
                    <div class="number">0</div>
                    <div class="card-name">Active Vendors</div>
                </div>
                <div class="icon-box">
                    <i class="fa-solid fa-globe"></i>
                </div>
            </div>
            <div class="card">
                <div class="card-content">
                    <div class="number">P8,100</div>
                    <div class="card-name">Avg. Revenue / Day</div>
                </div>
                <div class="icon-box">
                    <i class="fa-solid fa-gauge-simple"></i>
                </div>
            </div>
            <div class="card">
              <div class="card-content">
                  <div class="number" id="todays-revenue">loading</div>
                  <div class="card-name">Today's Revenue</div>
              </div>
              <div class="icon-box">
                  <i class="fa-solid fa-money-bill"></i>
              </div>
          </div>
        </div>
      </div>
     <script>
    // Function to fetch vendor count and update the HTML
    function fetchVendorCount() {
        fetch('getVendorCount.php')  // Ensure this path is correct
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                console.log('Vendor count fetched:', data);  // For debugging
                document.getElementById('registered-vendors').textContent = data;
            })
            .catch(error => console.error('Error fetching vendor count:', error));
    }

    // Function to fetch today's revenue
    function fetchTodaysRevenue() {
        fetch('getTodaysRevenue.php')  // Ensure this path is correct
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                let todaysRevenue = parseFloat(data);  // Convert the fetched data to a number
                document.getElementById('todays-revenue').textContent = `₱${todaysRevenue.toFixed(2)}`;

                // Calculate average revenue per day based on today's revenue
                // For demonstration, let's assume you're calculating an average over 7 days
                let avgRevenue = todaysRevenue;  // Update this logic as needed for your specific case
                document.querySelector(".cards .card:nth-child(3) .number").textContent = `₱${avgRevenue.toFixed(2)}`;
            })
            .catch(error => {
                console.error('Error fetching today\'s revenue:', error);
                document.getElementById('todays-revenue').textContent = "Error loading data";
                document.querySelector(".cards .card:nth-child(3) .number").textContent = "Error";
            });
    }

    // Ensure both functions run on page load
    window.onload = function() {
        fetchVendorCount();
        fetchTodaysRevenue();
    };

    // Dropdown toggle logic
    document.getElementById('vendorDropdown').addEventListener('click', function(event) {
        var dropdownContent = document.getElementById('vendorDropdownContent');
        dropdownContent.style.display = dropdownContent.style.display === 'none' || dropdownContent.style.display === '' ? 'block' : 'none';
    });
</script>

      
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      
      </body>
      </html>
